{% load markup %}
{% load getresponse %}

{% getquestionresponse question as response %}

<div class="cases">
  {{question.intro_text|markdown}}

  <div class="casetitle"> Question {{question.display_number}}:</div>
     
  <div class="casecontent">
    <div class="casequestion">
      {{question.text|markdown}}
      {% if question.answerable %}
        {% if block.rhetorical %}<form id="form-{{question.id}}" method="post">{% endif %}
        {% if block.matching %}<form id="matching-form-{{question.id}}">{% endif %}

	{% if question.is_single_choice %}
      {% include 'quizblock/single_choice.html' %}
  {% endif %}

  {% if question.is_single_choice_feedback %}
      {% include 'quizblock/single_choice.html' %}
  {% endif %}

  {% if question.is_matching %}
      {% include 'quizblock/single_choice_matching.html' %}
  {% endif %}

	{% if question.is_single_choice_dropdown %}
  	  {% include 'quizblock/single_choice_dropdown.html' %}
	{% endif %}

	{% if question.is_multiple_choice %}
	  {% include 'quizblock/multiple_choice.html' %}
	{% endif %}
  {% if block.pre_test %}
    <input name="pre_test" value="true" type="hidden" />
  {% endif %} 

        {% if block.rhetorical %}
          </form>
        {% endif %}
        {% if block.matching %}
          </form><!-- end #matching-form-{{question.id}}-->
        {% endif %}
      {% else %}
        {% if question.is_short_text %}
          {% include 'quizblock/short_text.html' %}
        {% endif %}

        {% if question.is_long_text %}
          {% include 'quizblock/long_text.html' %}
        {% endif %}
      {% endif %}
    </div>

    {% if block.rhetorical %}
      {% include 'quizblock/show_answer.html' %}
    {% else %}
      {% if response %}
        {% include 'quizblock/show_answer.html' %}
      {% endif %}
  {% endif %}
  </div>
</div>
